name: Export Windows

on:
  push:

jobs:
  Export:
    name: Export Windows
    runs-on: ubuntu-latest

    steps:
    - name: Downloading Commit
      uses: actions/checkout@v4

    #- name: Get Cache Godot Files
    #  uses: actions/cache@v4
    #  with:
    #    key: export-files
    #    path: |
    #      /home/runner/.local/share/godot/godot_templates.tpz
    #      /home/runner/.local/share/godot/godot.zip
    #    restore-keys: export-files

    - name: Exporting Project
      uses: firebelley/godot-export@v6.0.0
      with:
        # Defining all the required inputs
        godot_executable_download_url: https://downloads.tuxfamily.org/godotengine/4.3/mono/Godot_v4.3-stable_mono_linux_x86_64.zip
        godot_export_templates_download_url: https://downloads.tuxfamily.org/godotengine/4.3/mono/Godot_v4.3-stable_mono_export_templates.tpz
        cache: true
        relative_project_path: ./
        relative_export_path: ./export/Windows

    - name: Coping Necessery files into the Build
      run: |
        cp -r "Sapato" "export/Windows/Windows Desktop"

    - name: Uploading New Artifact
      uses: actions/upload-artifact@v4
      with:
        name: Maracuja-Engine
        path: export/Windows

    #- name: Cashing Up the export template files
    #  uses: actions/cache@v4
    #  with:
    #    key: export-files
    #    path: |
    #      /home/runner/.local/share/godot/godot_templates.tpz
    #      /home/runner/.local/share/godot/godot.zip
    #    restore-keys: export-files
